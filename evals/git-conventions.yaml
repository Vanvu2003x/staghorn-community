name: git-conventions
description: Verify git conventions are followed
tags: [git, core]

# Tests aligned with Git Conventions in CLAUDE.md:
# - Write commit messages in imperative mood
# - Keep commits atomic and focused
# - Reference issue numbers when applicable

tests:
  - name: uses-imperative-mood
    description: Should write commit messages in imperative mood
    prompt: |
      Write a commit message for adding a new user authentication feature
    assert:
      - type: llm-rubric
        value: Commit message uses imperative mood (e.g., "Add" not "Added" or "Adding")

  - name: keeps-commits-atomic
    description: Should recommend atomic commits
    prompt: |
      I made these changes in one commit:
      - Fixed login bug
      - Added new dashboard
      - Updated README
      - Refactored database layer

      Is this a good commit?
    assert:
      - type: llm-rubric
        value: Response should recommend splitting into separate, focused commits

  - name: references-issues
    description: Should reference issue numbers when applicable
    prompt: |
      Write a commit message for fixing bug #456
    assert:
      - type: contains-any
        value: ["#456", "fixes #456", "closes #456", "resolves #456"]
